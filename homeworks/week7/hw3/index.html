<!DOCTYPE html>
<html>
    <header>
        <title>計算機</title>
        <meta charset="utf-8" />
        <link  rel = " stylesheet "  href = " ./style.css " />
    </header>
    <body>
        <div id="wrapper">
            <form>
                <div id="displayBlock">
                    <input id="screen" type="text" value="0" dir="rtl" readonly="readonly" />
                </div>
                <div id="keyinBlock">
                    <div class="row">
                        <input class="btn" type="button" name="AC" value="AC"/>
                        <input class="btn toRight count" type="button" name=divide value="÷" />
                    </div>
                    <div class="row">
                        <input class="btn number" type="button" name=number value="7" />
                        <input class="btn number number" type="button" name=number value="8" />
                        <input class="btn number" type="button" name=number value="9" />
                        <input class="btn count" type="button" name=times value="x" />
                    </div>
                    <div class="row">
                        <input class="btn number" type="button" name=number value="4" />
                        <input class="btn number" type="button" name=number value="5" />
                        <input class="btn number" type="button" name=number value="6" />
                        <input class="btn count" type="button" name=plus value="+" />
                    </div>
                    <div class="row">
                        <input class="btn number" type="button" name=number value="1" />
                        <input class="btn number" type="button" name=number value="2" />
                        <input class="btn number" type="button" name=number value="3" />
                        <input class="btn count" type="button" name=minus value="-" />
                    </div>
                    <div class="row">
                        <input class="btn number" type="button" name=number value="0" />
                        <input class="btn number" type="button" name=number value="." />
                        <input class="btn big toEqual" type="button" name=equals value="=" />
                    </div>
                </div>
            </form>
        </div>
        <script>
            const numbers = document.querySelectorAll(".number");
            var sum = document.getElementById("screen")
            const counts = document.querySelectorAll(".count")
            //console.log(sum)
            let num = '';
            let num0 = '';
            let standBy = 0;
            let standBy2 = 0;
            //let minusClickTimes = 0;
           
            let equals = document.querySelector('.toEqual');
            //equals.setAttribute('value', e.target.name)

            
            document.getElementById('keyinBlock').addEventListener('click',function(e){
                console.log(e.target.name)
                //console.log(standBy)
                if (e.target.type !== 'button') {
                    e.preventDefault;
                } else {
                    if ( e.target.name === 'number') {
                        num += (e.target.value)
                        sum.setAttribute("value",num)
                    }
                    if (e.target.name === 'plus') { // 加法
                        equals.setAttribute('name', e.target.name)
                        standBy += Number(num);
                        sum.setAttribute("value",standBy) // 這樣就有了連加功能了
                        num = ''; // 再次輸入數字時為空
                    }
                    if (e.target.name === 'minus') { // 減法
                        equals.setAttribute('name', e.target.name)
                        if ( standBy === 0 ) {
                            standBy = Number(num);
                            sum.setAttribute("value",standBy) // 這樣就有了連加功能了
                            num = ''; // 再次輸入數字時為空
                        } else {
                            standBy -= Number(num)
                            if (standBy >= 0) {
                                sum.setAttribute("value",standBy) // 這樣就有了連減功能了
                                num = ''; // 再次輸入數字時為空
                            } else if ( standBy < 0) {
                                standBy = Math.abs(standBy)
                                sum.setAttribute("value",`${standBy}-`) // 這樣就有了連減功能了
                                standBy *= (-1)
                                num = ''; // 再次輸入數字時為空
                            }
                        }
                    }
                    if (e.target.name === 'times') { // 乘法
                        equals.setAttribute('name', e.target.name)
                        if ( standBy === 0) { standBy++}
                        standBy *= Number(num);
                        sum.setAttribute("value",standBy) // 這樣就有了連乘功能了
                        num = ''; // 再次輸入數字時為空
                    }
                    if (e.target.name === 'divide') { // 除法
                        equals.setAttribute('name', e.target.name)
                        if ( standBy === 0 ) {
                            standBy = Number(num);
                            sum.setAttribute("value",standBy) 
                            num = ''; // 再次輸入數字時為空
                        } else {
                        standBy = standBy / Number(num);
                        sum.setAttribute("value",standBy) // 這樣就有了連除功能了
                        num = ''; // 再次輸入數字時為空
                        }
                    }
                    if (e.target.name === 'AC') { // 乘法
                        standBy = 0;
                        sum.setAttribute("value",standBy) // 這樣就有了連乘功能了
                        num = ''; // 再次輸入數字時為空
                    }
                }
            })

            
            
           
          
        </script>
    </body>
</html>