## 資料庫欄位型態 VARCHAR 跟 TEXT 的差別是什麼

- VARCHAR : 

    在 5.0.3 版本以前最大支援長度為 255，5.0.3 版之後最大長度可支援到 65535 個字節
    
    我們在 VARCHAR 中設定的長度是字符，而字符最大可以儲存多少，與字符集有關，因為在不同字符集之下，每個字符所佔用的字節不一樣。比如在 UTF-8 之中，每個字符是 1-3 個字節，如漢字就是佔 3 個字節，所以最長可以儲存 (65535-1-2)/3 = 21844 個字符。

    (65535-1-2)/3　

    -1 是因為 VARCHAR 實際儲存會從第二個字節開始，所以第一個字節不算
    -2 是因為超過255個字符會有2字節的額外占用空間
    /3 是因為最大占用字符數為 3，如漢字


- TEXT : 

    這個型態內中不能有默認值，最大的長度為 2 的 16 次方 -1 也是 65535，但其實超出這個數字還是可以儲存，因為其還有 MediumTEXT 類型選擇，所以理論上，儲存長度是比 VARCHAR 還要多的 ( 前提是 VARCHAR 有設定長度 )。與 VARCHAR 的差別是 TEXT 需要兩個字節的空間紀錄字段總字節數，在運行資料時的速度不及 VARCHAR

    
---


## Cookie 是什麼？在 HTTP 這一層要怎麼設定 Cookie，瀏覽器又會以什麼形式帶去 Server？

Cookie 是一個純文字型的檔案，用加密的方式儲存在用戶端上，它可能是你的登入資訊，搜尋紀錄等等。而每個 Cookie 都是有時效性的。

通常我們在發送 Request 時，伺服器會回傳一個或包含多個 Set-Cookie 的 Response 回來 ( Set-Cookie 位於 Header )，瀏覽器就會儲存之，當下一次瀏覽網頁發送 Request 時，瀏覽器就會檢查 Cookie，看看有沒有相關的 Cookies，如果有，就會在 Request Header 加入 Cookie 帶去 Server。

---


## 我們本週實作的會員系統，你能夠想到什麼潛在的問題嗎？

這樣來講，我的伺服器端會發送 Cookie 給對方瀏覽器，而我設定的 Cookie 值為該會員的暱稱，這樣做的安全性應該可以稍微好一點，因為每個會員的名稱都不相同 ( 來源為資料庫的內容 )，各自的 Cookie 也不會一樣。

但若是僅給予一個相同的值，比如說作業上預設的 001，很可能就會被盜取，因為各會員都收到一樣的 Cookie 值。

而就會員系統本身也有一些問題是，由於帳號密碼都是以原本的形式存在於資料庫之中，所以很可能的狀況是我把太多會員的帳號密碼都依賴在一個資料庫的帳號密碼上面，只要這個資料庫的密碼一被知道，裡面內含的會員帳號資訊都會曝光。

所以有一個可以做的方法是，我可以把會員的密碼以一個複雜的公式，近乎亂數的方式儲存在資料庫之中，然後當會員需要登入驗證時，也採用這套公式對比資料庫內的資料，所以至少我就可以把真正的秘密藏在我後端的運作邏輯，而非一目了然的表單了。


